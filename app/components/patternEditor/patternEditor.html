<div class="container-fluid">
	<div class="page-header">
		<h1>{{tuneName}} – {{patternName}}</h1>
	</div>
	<div>
		<button type="button" class="btn" ng-class="playing.playing ? 'btn-info' : 'btn-success'" ng-click="playPause()"><span class="glyphicon" ng-class="playing.playing ? 'glyphicon-pause' : 'glyphicon-play'"></span> {{playing.playing ? 'Pause' : 'Play'}}</button>
		<button type="button" class="btn btn-danger" ng-click="stop()"><span class="glyphicon glyphicon-stop"></span> Stop</button>
		<div class="btn-group" dropdown>
			<button type="button" class="btn btn-default dropdown-toggle" dropdown-toggle>Length: {{pattern.length}} <span class="caret"></span></button>
			<ul class="dropdown-menu" role="menu">
				<li ng-repeat="le in [ 4, 8, 12, 16, 20, 24, 28, 32, 36, 40, 44, 48, 52, 56, 60, 64 ]"><a href="javascript:" ng-click="pattern.length = le">Length: {{le}}</a></li>
			</ul>
		</div>
		<div class="btn-group" dropdown>
			<button type="button" class="btn btn-default dropdown-toggle" dropdown-toggle>Time: {{pattern.time}}⁄4 <span class="caret"></span></button>
			<ul class="dropdown-menu" role="menu">
				<li ng-repeat="ti in [ 3, 4, 12 ]"><a href="javascript:" ng-click="pattern.time = ti">Time: {{ti}}⁄4</a></li>
			</ul>
		</div>
		<div class="btn-group">
			<slider ng-model="speed" min="60" max="180"></slider>
		</div>
	</div>
	<div class="pattern-editor-container">
		<table class="pattern-editor" ng-class="'time-'+pattern.time">
			<thead>
				<tr>
					<td></td>
					<td ng-repeat="(i,a) in getNumber(pattern.length) track by $index" colspan="{{pattern.time}}" ng-class="getBeatClass(i)">{{i+1}}</td>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="(instrumentKey, instrument) in instruments">
					<th>{{instrument.name}}</th>
					<td ng-repeat="(i,a) in getNumber(pattern.length*pattern.time) track by $index" ng-class="getStrokeClass(i)" dropdown>
						<a href="javascript:" class="dropdown-toggle" dropdown-toggle>{{strokes[pattern[instrumentKey][i]] || ' '}}</a>
						<ul class="dropdown-menu">
							<li><a href="javascript:" ng-click="pattern[instrumentKey][i]=' '"> </a></li>
							<li ng-repeat="stroke in instruments[instrumentKey].strokes"><a href="javascript:" ng-click="pattern[instrumentKey][i]=stroke">{{strokes[stroke]}}</a></li>
						</ul>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>